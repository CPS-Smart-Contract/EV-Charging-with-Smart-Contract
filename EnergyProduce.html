<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<link rel="stylesheet" type="text/css" href="mainTrader.css">
	<script src="./node_modules/web3/dist/web3.min.js"></script>

</head>

<body>
	<div class="container">
		<h1>Producer</h1>
		<h2 id="instructor"></h2>
		<label for="name" class="col-lg-2 control-label">Producer Name</label>
		<input id="pname" type="text">
		<label for="name" class="col-lg-2 control-label">Price</label>
		<input id="pprice" type="text">
		<button id="button">Set Price</button>
	</div>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
	<script>
		if (typeof web3 !== 'undefined') {
			web3 = new Web3(web3.currentProvider);
		} else {
			// set the provider you want from Web3.providers
			web3 = new Web3(new Web3.providers.HttpProvider("HTTP://192.168.2.2:7545"));
		}
		web3.eth.defaultAccount = web3.eth.accounts[0];
		//contract ABI
		var myContract = web3.eth.contract([
	{
		"constant": false,
		"inputs": [
			{
				"name": "stName",
				"type": "string"
			},
			{
				"name": "prc",
				"type": "uint256"
			},
			{
				"name": "evtype",
				"type": "uint256"
			},
			{
				"name": "profit",
				"type": "uint256"
			}
		],
		"name": "setPrice",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "index",
				"type": "uint256"
			},
			{
				"name": "_evtype",
				"type": "uint256"
			}
		],
		"name": "geAPrice",
		"outputs": [
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "uint256"
			},
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_evtype",
				"type": "uint256"
			}
		],
		"name": "getArrayLength",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_evtype",
				"type": "uint256"
			}
		],
		"name": "getPrice",
		"outputs": [
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "tInfo",
		"outputs": [
			{
				"name": "cmName",
				"type": "string"
			},
			{
				"name": "price",
				"type": "uint256"
			},
			{
				"name": "evType",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]);		
		var SContract = myContract.at('0x3129eaf1760e374a6feeac07b262c6092568c383');
		$("#button").click(function () {
			SContract.setPrice($("#pname").val(), $("#pprice").val(), 0, 0, { from: web3.eth.accounts[0], gas: 3000000 });
		});
		/*
		var traderlistContract = web3.eth.contract([{ "constant": true, "inputs": [{ "name": "index", "type": "uint256" }, { "name": "_evtype", "type": "uint256" }], "name": "geAPrice", "outputs": [{ "name": "", "type": "string" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_evtype", "type": "uint256" }], "name": "getArrayLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "stName", "type": "string" }, { "name": "prc", "type": "uint256" }, { "name": "evtype", "type": "uint256" }, { "name": "profit", "type": "uint256" }], "name": "setPrice", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "", "type": "uint256" }], "name": "tInfo", "outputs": [{ "name": "cmName", "type": "string" }, { "name": "price", "type": "uint256" }, { "name": "evType", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_evtype", "type": "uint256" }], "name": "getPrice", "outputs": [{ "name": "", "type": "string" }, { "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }]);
		var traderlist = traderlistContract.new(
			{
				from: web3.eth.accounts[0],
				data: '0x6060604052600060025534156200001557600080fd5b600080548060010182816200002b9190620002f3565b916000526020600020906003020160006060604051908101604052806040805190810160405280600381526020017f5072310000000000000000000000000000000000000000000000000000000000815250815260200160648152602001600081525090919091506000820151816000019080519060200190620000b192919062000328565b50602082015181600101556040820151816002015550505060008054806001018281620000df9190620002f3565b916000526020600020906003020160006060604051908101604052806040805190810160405280600381526020017f47723100000000000000000000000000000000000000000000000000000000008152508152602001605a81526020016001815250909190915060008201518160000190805190602001906200016592919062000328565b50602082015181600101556040820151816002015550505060008054806001018281620001939190620002f3565b916000526020600020906003020160006060604051908101604052806040805190810160405280600381526020017f54723100000000000000000000000000000000000000000000000000000000008152508152602001606481526020016002815250909190915060008201518160000190805190602001906200021992919062000328565b50602082015181600101556040820151816002015550505060008054806001018281620002479190620002f3565b916000526020600020906003020160006060604051908101604052806040805190810160405280600381526020017f5374310000000000000000000000000000000000000000000000000000000000815250815260200160648152602001600381525090919091506000820151816000019080519060200190620002cd92919062000328565b506020820151816001015560408201518160020155505050600460018190555062000467565b8154818355818115116200032357600302816003028360005260206000209182019101620003229190620003af565b5b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200036b57805160ff19168380011785556200039c565b828001600101855582156200039c579182015b828111156200039b5782518255916020019190600101906200037e565b5b509050620003ab9190620003f3565b5090565b620003f091905b80821115620003ec5760008082016000620003d291906200041b565b6001820160009055600282016000905550600301620003b6565b5090565b90565b6200041891905b8082111562000414576000816000905550600101620003fa565b5090565b90565b50805460018160011615610100020316600290046000825580601f1062000443575062000464565b601f016020900490600052602060002090810190620004639190620003f3565b5b50565b6108d280620004776000396000f30060606040526004361061006d576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063370d2959146100725780633e06e62114610125578063a6f04a7e1461015c578063ddec5c11146101d4578063e75722301461029b575b600080fd5b341561007d57600080fd5b61009c600480803590602001909190803590602001909190505061033e565b6040518080602001848152602001838152602001828103825285818151815260200191508051906020019080838360005b838110156100e85780820151818401526020810190506100cd565b50505050905090810190601f1680156101155780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b341561013057600080fd5b6101466004808035906020019091905050610483565b6040518082815260200191505060405180910390f35b341561016757600080fd5b6101d2600480803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919080359060200190919080359060200190919080359060200190919050506104e8565b005b34156101df57600080fd5b6101f5600480803590602001909190505061058c565b604051808060200184815260200183815260200182810382528581815460018160011615610100020316600290048152602001915080546001816001161561010002031660029004801561028a5780601f1061025f5761010080835404028352916020019161028a565b820191906000526020600020905b81548152906001019060200180831161026d57829003601f168201915b505094505050505060405180910390f35b34156102a657600080fd5b6102bc60048080359060200190919050506105c4565b6040518080602001838152602001828103825284818151815260200191508051906020019080838360005b838110156103025780820151818401526020810190506102e7565b50505050905090810190601f16801561032f5780820380516001836020036101000a031916815260200191505b50935050505060405180910390f35b610346610734565b60008060008590505b60015481101561047a578460008281548110151561036957fe5b906000526020600020906003020160020154141561046d5760008181548110151561039057fe5b90600052602060002090600302016000016000828154811015156103b057fe5b90600052602060002090600302016001015460018301828054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561045b5780601f106104305761010080835404028352916020019161045b565b820191906000526020600020905b81548152906001019060200180831161043e57829003601f168201915b5050505050925093509350935061047b565b808060010191505061034f565b5b509250925092565b600080600090505b6001548110156104dd57826000828154811015156104a557fe5b90600052602060002090600302016002015414156104d0576002600081548092919060010191905055505b808060010191505061048b565b600254915050919050565b60648184028115156104f657fe5b04830192506000805480600101828161050f9190610748565b91600052602060002090600302016000606060405190810160405280888152602001878152602001868152509091909150600082015181600001908051906020019061055c92919061077a565b50602082015181600101556040820151816002015550505060016000815480929190600101919050555050505050565b60008181548110151561059b57fe5b906000526020600020906003020160009150905080600001908060010154908060020154905083565b6105cc610734565b6000806000806000199250600090505b60015481101561068a57856000828154811015156105f657fe5b906000526020600020906003020160020154141561067d5760008181548110151561061d57fe5b90600052602060002090600302016001015483111561067c5760008181548110151561064557fe5b906000526020600020906003020160010154925060008181548110151561066857fe5b906000526020600020906003020160000191505b5b80806001019150506105dc565b8183818054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107215780601f106106f657610100808354040283529160200191610721565b820191906000526020600020905b81548152906001019060200180831161070457829003601f168201915b5050505050915094509450505050915091565b602060405190810160405280600081525090565b8154818355818115116107755760030281600302836000526020600020918201910161077491906107fa565b5b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106107bb57805160ff19168380011785556107e9565b828001600101855582156107e9579182015b828111156107e85782518255916020019190600101906107cd565b5b5090506107f69190610839565b5090565b61083691905b808211156108325760008082016000610819919061085e565b6001820160009055600282016000905550600301610800565b5090565b90565b61085b91905b8082111561085757600081600090555060010161083f565b5090565b90565b50805460018160011615610100020316600290046000825580601f1061088457506108a3565b601f0160209004906000526020600020908101906108a29190610839565b5b505600a165627a7a7230582005ef97f0bd3bf4ed6b9bccdde38874ea4a13eb0831a14261b5e771168b0cbd1b0029',
				gas: '4700000'
			}, function (e, contract) {
				console.log(e, contract);
				if (typeof contract.address !== 'undefined') {
					console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
				}
			})
		

		$("#button").click(function () {
			traderlist.setPrice($("#pname").val(), $("#pprice").val(), 0, 0, { from: web3.eth.accounts[0], gas: 3000000 });
		});
		*/
	</script>
</body>

</html>